## 指针类型转换之谜

指针变量，本质上是一个变量，只是她是存放地址的变量，指针的类型代表的是它所指向的变量的类型。因此就有了指向指针、字符型、浮点型等其他类型的指针，但实际上所有类型的指针变量存放的都是int型。

从本质上来说，不同类型的指针变量并没有区别。

声明不同类型的指针变量即是规定了该变量结合指针运算符时读取内存中的字节数，同样在指针移动和指针的运算时在内存中移动的最小字节数。



无论什么类型的指针变量，在内存中本质都是一样，都是整数值的地址值，而这个不同的类型仅仅是向系统说明该变量在内存中占据的字节数。



指针的值就是指针所指向的地址，在32位程序中，指针就是一个32位整数



a=某个数，这个数必须代表一个合法的地址；

ptr=(TYPE*)a；//呵呵，这就可以了。

严格说来这里的(TYPE*)和指针类型转换中的(TYPE*)还不一样。这里的(TYPE*)的意思是把无符号整数a的值当作一个地址来看待。

上面强调了a的值必须代表一个合法的地址，否则的话，在你使用ptr的时候，就会出现非法操作错误。

想想能不能反过来，把指针指向的地址即指针的值当作一个整数取出来。完全可以。下面的例子演示了把一个指针的值当作一个整数取出来，然后再把这个整数当作一个地址赋给一个指针：

例十六：

int a=123,b;

int*ptr=&a;

char *str;

b=(int)ptr;//把指针ptr的值当作一个整数取出来。

str=(char*)b;//把这个整数的值当作一个地址赋给指针str。

小结：可以把指针的值当作一个整数取出来，也可以把一个整数值当作地址赋给一个指针。







